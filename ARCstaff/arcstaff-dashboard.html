<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arcular+ Staff Dashboard</title>
    <link rel="stylesheet" href="arcstaff.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="icon" type="image/png" href="logo1.png">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
</head>
<body>
    <!-- Loading State -->
    <div id="loadingState" class="loading-state">
        <div class="loading-spinner">
            <div class="spinner-ring"></div>
            <div class="spinner-ring"></div>
            <div class="spinner-ring"></div>
        </div>
        <p>Loading your dashboard...</p>
        <div class="loading-progress">
            <div class="progress-bar"></div>
        </div>
    </div>

    <!-- Dashboard Content -->
    <div id="dashboardContent" class="dashboard-container" style="display: none;">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-left">
                <img src="logo1.png" alt="Arcular+ Logo" class="logo">
                <div class="header-title">
                    <h1>ARC Staff Dashboard</h1>
                    <p class="subtitle">Service Provider Management</p>
                </div>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user-circle"></i>
                    </div>
                    <div class="user-details">
                        <span id="userName" class="user-name">Staff Member</span>
                        <span id="userEmail" class="user-email">staff@arcular.com</span>
                    </div>
                </div>
                <div class="header-actions">
                    <button id="settingsBtn" class="settings-btn" title="Staff Settings">
                        <i class="fas fa-cog"></i>
                    </button>
                    <button id="logoutBtn" class="logout-btn">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>
        </header>

        <!-- Stats Overview Section -->
        <section class="stats-section">
            <div class="section-header">
                <h3>Platform Overview</h3>
                <div class="stats-filters">
                    <select id="stats-period">
                        <option value="today">Today</option>
                        <option value="week">This Week</option>
                        <option value="month" selected>This Month</option>
                    </select>
                </div>
            </div>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="total-providers-count">0</h3>
                        <p>Total Providers</p>
                        <div class="stat-trend positive">
                            <i class="fas fa-arrow-up"></i> <span>12%</span>
                        </div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-user-check"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="approved-providers-count">0</h3>
                        <p>Approved Providers</p>
                        <div class="stat-trend positive">
                            <i class="fas fa-arrow-up"></i> <span>8%</span>
                        </div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="pending-approvals-count">0</h3>
                        <p>Pending Approvals</p>
                        <div class="stat-trend neutral">
                            <i class="fas fa-minus"></i> <span>0%</span>
                        </div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="total-departments">0</h3>
                        <p>Departments</p>
                        <div class="stat-trend positive">
                            <i class="fas fa-arrow-up"></i> <span>5%</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Main Dashboard Layout -->
        <div class="dashboard-layout">
            <!-- Main Content Area -->
            <main class="main-content-full">
                <!-- Search Section -->
                <div class="search-section">
                    <div class="search-container">
                        <div class="search-input-group">
                            <i class="fas fa-search search-icon"></i>
                            <input type="text" id="providerSearchInput" placeholder="Search service providers by name, email, or type..." class="search-input">
                            <button id="searchBtn" class="search-btn">
                                <i class="fas fa-search"></i> Search
                            </button>
                        </div>
                        <div class="search-filters">
                            <select id="providerTypeFilter" class="filter-select">
                                <option value="">All Types</option>
                                <option value="hospital">Hospitals</option>
                                <option value="doctor">Doctors</option>
                                <option value="nurse">Nurses</option>
                                <option value="lab">Labs</option>
                                <option value="pharmacy">Pharmacies</option>
                            </select>
                            <select id="statusFilter" class="filter-select">
                                <option value="">All Status</option>
                                <option value="approved">Approved</option>
                                <option value="pending">Pending</option>
                                <option value="rejected">Rejected</option>
                            </select>
                            <button id="clearFiltersBtn" class="clear-filters-btn">
                                <i class="fas fa-times"></i> Clear Filters
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Service Provider Management Tabs -->
                <div class="provider-management-tabs">
                    <div class="tabs">
                        <button class="tab-btn active" onclick="switchProviderTab('pending')">
                            <i class="fas fa-clock"></i>
                            <span>Pending Providers</span>
                        </button>
                        <button class="tab-btn" onclick="switchProviderTab('approved')">
                            <i class="fas fa-check-circle"></i>
                            <span>Approved Providers</span>
                        </button>
                    </div>
                </div>

                <!-- Service Provider Lists -->
                <div id="serviceProviderContent" class="service-provider-content">
                    <!-- Content will be dynamically loaded here -->
                </div>
            </main>
        </div>

        <!-- Quick Actions Section -->
        <section class="quick-actions-section">
            <div class="section-header">
                <h3>Quick Actions</h3>
            </div>
            
            <!-- Quick Actions Tabs -->
            <div class="quick-actions-tabs">
                <button class="tab-btn active" data-tab="reports">
                    <i class="fas fa-chart-bar"></i>
                    <span>Reports</span>
                </button>
                <button class="tab-btn" data-tab="exports">
                    <i class="fas fa-download"></i>
                    <span>Exports</span>
                </button>
                <button class="tab-btn" data-tab="tools">
                    <i class="fas fa-tools"></i>
                    <span>Tools</span>
                </button>
            </div>
            
            <!-- Tab Content -->
            <div class="tab-content">
                <!-- Reports Tab -->
                <div id="reports-tab" class="tab-panel active">
                    <div class="quick-actions-grid">
                        <button class="quick-action-btn" onclick="generateStaffReport()">
                            <i class="fas fa-chart-bar"></i>
                            <span>Staff Performance Report</span>
                            <small>Generate staff performance analytics</small>
                        </button>
                        <button class="quick-action-btn" onclick="generateProviderReport()">
                            <i class="fas fa-users"></i>
                            <span>Provider Statistics</span>
                            <small>View provider registration trends</small>
                        </button>
                        <button class="quick-action-btn" onclick="generateApprovalReport()">
                            <i class="fas fa-check-circle"></i>
                            <span>Approval Summary</span>
                            <small>Track approval rates and timelines</small>
                        </button>
                        <button class="quick-action-btn" onclick="generateMonthlyReport()">
                            <i class="fas fa-calendar-alt"></i>
                            <span>Monthly Summary</span>
                            <small>Monthly platform activity report</small>
                        </button>
                    </div>
                </div>
                
                <!-- Exports Tab -->
                <div id="exports-tab" class="tab-panel">
                    <div class="quick-actions-grid">
                        <button class="quick-action-btn" onclick="exportStaffData()">
                            <i class="fas fa-download"></i>
                            <span>Export Staff Data</span>
                            <small>Download staff information (CSV)</small>
                        </button>
                        <button class="quick-action-btn" onclick="exportProviderData()">
                            <i class="fas fa-file-excel"></i>
                            <span>Export Provider Data</span>
                            <small>Download all provider data (XLS)</small>
                        </button>
                        <button class="quick-action-btn" onclick="exportApprovalData()">
                            <i class="fas fa-clipboard-list"></i>
                            <span>Export Approval Data</span>
                            <small>Download approval history (CSV)</small>
                        </button>
                        <button class="quick-action-btn" onclick="exportAuditLog()">
                            <i class="fas fa-history"></i>
                            <span>Export Audit Log</span>
                            <small>Download system activity log</small>
                        </button>
                    </div>
                </div>
                
                <!-- Tools Tab -->
                <div id="tools-tab" class="tab-panel">
                    <div class="quick-actions-grid">
                        <button class="quick-action-btn" onclick="bulkApproveProviders()">
                            <i class="fas fa-check-double"></i>
                            <span>Bulk Approve</span>
                            <small>Approve multiple providers at once</small>
                        </button>
                        <button class="quick-action-btn" onclick="sendBulkNotifications()">
                            <i class="fas fa-bell"></i>
                            <span>Send Notifications</span>
                            <small>Send notifications to providers</small>
                        </button>
                        <button class="quick-action-btn" onclick="systemMaintenance()">
                            <i class="fas fa-cog"></i>
                            <span>System Maintenance</span>
                            <small>Run system maintenance tasks</small>
                        </button>
                        <button class="quick-action-btn" onclick="backupData()">
                            <i class="fas fa-database"></i>
                            <span>Backup Data</span>
                            <small>Create system backup</small>
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Staff Settings</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h4>Profile Information</h4>
                    <form id="profileForm">
                        <div class="form-group">
                            <label for="staffName">Full Name *</label>
                            <input type="text" id="staffName" required placeholder="Enter your full name">
                        </div>
                        <div class="form-group">
                            <label for="staffPhone">Phone Number *</label>
                            <input type="tel" id="staffPhone" required placeholder="Enter your phone number">
                        </div>
                        <div class="form-group">
                            <label for="staffDepartment">Department *</label>
                            <input type="text" id="staffDepartment" required placeholder="Enter your department">
                        </div>
                        <div class="form-group">
                            <label for="staffAddress">Address</label>
                            <textarea id="staffAddress" rows="3" placeholder="Enter your full address"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="staffBio">Bio</label>
                            <textarea id="staffBio" rows="3" placeholder="Tell us about yourself"></textarea>
                        </div>
                    </form>
                </div>
                
                <div class="settings-section">
                    <h4>Status Information</h4>
                    <div class="form-group">
                        <label>Current Status:</label>
                        <span id="staffStatus" class="status-badge pending">Pending Admin Approval</span>
                    </div>
                    <div class="form-group">
                        <label>Last Updated:</label>
                        <span id="lastUpdated">-</span>
                    </div>
                    <div class="form-group">
                        <label>Admin Comments:</label>
                        <div id="adminComments" class="admin-comments">
                            <p class="text-muted">No comments from admin yet.</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="saveSettingsBtn" class="btn btn-primary">
                    <i class="fas fa-save"></i> Submit for Admin Review
                </button>
                <button id="cancelSettingsBtn" class="btn btn-secondary">Cancel</button>
                <div class="approval-notice">
                    <small class="text-muted">
                        <i class="fas fa-info-circle"></i> 
                        Changes will be sent to admin for approval before taking effect.
                    </small>
                </div>
            </div>
        </div>
    </div>

    <!-- Service Provider Details Modal -->
    <div id="providerDetailsModal" class="modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h3 id="providerModalTitle">Service Provider Details</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div id="providerDetailsContent">
                    <!-- Provider details will be populated here -->
                </div>
            </div>
            <div class="modal-footer">
                <button id="approveProviderBtn" class="btn btn-success">
                    <i class="fas fa-check"></i> Approve
                </button>
                <button id="rejectProviderBtn" class="btn btn-danger">
                    <i class="fas fa-times"></i> Reject
                </button>
                <button id="restoreProviderBtn" class="btn btn-info" style="display: none;">
                    <i class="fas fa-undo"></i> Restore
                </button>
                <button id="requestDocsBtn" class="btn btn-warning">
                    <i class="fas fa-file-alt"></i> Request Documents
                </button>
                <button id="closeProviderBtn" class="btn btn-secondary">Close</button>
            </div>
        </div>
    </div>

    <!-- Rejection Modal -->
    <div id="rejectionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Reject Application</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="rejectionReason">Reason for Rejection:</label>
                    <textarea id="rejectionReason" rows="4" placeholder="Please provide a detailed reason for rejection..." required></textarea>
                </div>
                <div class="form-group">
                    <label for="rejectionCategory">Rejection Category:</label>
                    <select id="rejectionCategory" required>
                        <option value="">Select a category</option>
                        <option value="incomplete_docs">Incomplete Documentation</option>
                        <option value="invalid_license">Invalid License</option>
                        <option value="expired_cert">Expired Certificate</option>
                        <option value="missing_info">Missing Information</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="nextSteps">Next Steps for Applicant:</label>
                    <textarea id="nextSteps" rows="3" placeholder="What should the applicant do next?" required></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button id="confirmRejectBtn" class="btn btn-danger">
                    <i class="fas fa-times"></i> Confirm Rejection
                </button>
                <button id="cancelRejectBtn" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Document Request Modal -->
    <div id="documentRequestModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Request Additional Documents</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="documentRequest">Documents Required:</label>
                    <textarea id="documentRequest" rows="4" placeholder="Please specify which additional documents are needed..." required></textarea>
                </div>
                <div class="form-group">
                    <label for="deadline">Deadline for Submission:</label>
                    <input type="date" id="deadline" min="" required>
                </div>
                <div class="form-group">
                    <label for="requestNotes">Additional Notes:</label>
                    <textarea id="requestNotes" rows="3" placeholder="Any additional information for the applicant..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button id="confirmRequestBtn" class="btn btn-warning">
                    <i class="fas fa-paper-plane"></i> Send Request
                </button>
                <button id="cancelRequestBtn" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Success/Error Messages -->
    <div id="messageContainer" class="message-container"></div>

    <!-- Scripts -->
    <script src="script.js"></script>
</body>
</html>
